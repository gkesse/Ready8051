C51 COMPILER V8.12   GSTATEMACHINE                                                         10/02/2017 22:09:00 PAGE 1   


C51 COMPILER V8.12, COMPILATION OF MODULE GSTATEMACHINE
OBJECT MODULE PLACED IN .\GStateMachine.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\..\lib\GStateMachine.c BROWSE INCDIR(..\..\lib) DEBUG OBJECTEXTEND PRINT
                    -(.\GStateMachine.lst) OBJECT(.\GStateMachine.obj)

line level    source

   1          //===============================================
   2          #include "GStateMachine.h"
   3          #include "GPortDef.h"
   4          #include "GEnum.h"
   5          //===============================================
   6          static eGLight gLight_State_L1;
   7          static eGLight gLight_State_L2;
   8          //===============================================
   9          static uint gState_Light_L2_Time;
  10          static uint gState_Light_L1_Time;
  11          //===============================================
  12          void GState_Init() {
  13   1          gLight_State_L1 = RED;
  14   1          gLight_State_L2 = GREEN;
  15   1          
  16   1          gState_Light_L1_Time = 0;
  17   1          gState_Light_L2_Time = 0;
  18   1      }
  19          //===============================================
  20          void GState_Light_L1() {
  21   1          switch(gLight_State_L1) {
  22   2              case RED: {
  23   3                  LIGHT_RED_L1 = LIGHT_ON;
  24   3                  LIGHT_AMBER_L1 = LIGHT_OFF;
  25   3                  LIGHT_GREEN_L1 = LIGHT_OFF;
  26   3                  if(++gState_Light_L1_Time >= LIGHT_RED_DURATION) {
  27   4                      gLight_State_L1 = RED_AMBER;
  28   4                      gState_Light_L1_Time = 0;    
  29   4                  } 
  30   3                  break;
  31   3              }
  32   2              case RED_AMBER: {
  33   3                  LIGHT_RED_L1 = LIGHT_ON;
  34   3                  LIGHT_AMBER_L1 = LIGHT_OFF;
  35   3                  LIGHT_GREEN_L1 = LIGHT_OFF;
  36   3                  if(++gState_Light_L1_Time >= LIGHT_RED_AMBER_DURATION) {
  37   4                      gLight_State_L1 = RED_RED_1;
  38   4                      gState_Light_L1_Time = 0;    
  39   4                  } 
  40   3                  break;
  41   3              }
  42   2              case RED_RED_1: {
  43   3                  LIGHT_RED_L1 = LIGHT_ON;
  44   3                  LIGHT_AMBER_L1 = LIGHT_OFF;
  45   3                  LIGHT_GREEN_L1 = LIGHT_OFF;
  46   3                  if(++gState_Light_L1_Time >= LIGHT_RED_RED_1_DURATION) {
  47   4                      gLight_State_L1 = GREEN;
  48   4                      gState_Light_L1_Time = 0;    
  49   4                  } 
  50   3                  break;
  51   3              }
  52   2              case GREEN: {
  53   3                  LIGHT_RED_L1 = LIGHT_OFF;
  54   3                  LIGHT_AMBER_L1 = LIGHT_OFF;
C51 COMPILER V8.12   GSTATEMACHINE                                                         10/02/2017 22:09:00 PAGE 2   

  55   3                  LIGHT_GREEN_L1 = LIGHT_ON;
  56   3                  if(++gState_Light_L1_Time >= LIGHT_GREEN_DURATION) {
  57   4                      gLight_State_L1 = AMBER;
  58   4                      gState_Light_L1_Time = 0;    
  59   4                  } 
  60   3                  break;
  61   3              }
  62   2              case AMBER: {
  63   3                  LIGHT_RED_L1 = LIGHT_OFF;
  64   3                  LIGHT_AMBER_L1 = LIGHT_ON;
  65   3                  LIGHT_GREEN_L1 = LIGHT_OFF;
  66   3                  if(++gState_Light_L1_Time >= LIGHT_AMBER_DURATION) {
  67   4                      gLight_State_L1 = RED_RED_2;
  68   4                      gState_Light_L1_Time = 0;    
  69   4                  } 
  70   3                  break;
  71   3              }
  72   2              case RED_RED_2: {
  73   3                  LIGHT_RED_L1 = LIGHT_ON;
  74   3                  LIGHT_AMBER_L1 = LIGHT_OFF;
  75   3                  LIGHT_GREEN_L1 = LIGHT_OFF;
  76   3                  if(++gState_Light_L1_Time >= LIGHT_RED_RED_2_DURATION) {
  77   4                      gLight_State_L1 = RED;
  78   4                      gState_Light_L1_Time = 0;    
  79   4                  } 
  80   3                  break;
  81   3              }
  82   2          }
  83   1      
  84   1      }
  85          //===============================================
  86          void GState_Light_L2() {
  87   1          switch(gLight_State_L2) {
  88   2              case RED: {
  89   3                  LIGHT_RED_L2 = LIGHT_ON;
  90   3                  LIGHT_AMBER_L2 = LIGHT_OFF;
  91   3                  LIGHT_GREEN_L2 = LIGHT_OFF;
  92   3                  if(++gState_Light_L2_Time >= LIGHT_RED_DURATION) {
  93   4                      gLight_State_L2 = RED_AMBER;
  94   4                      gState_Light_L2_Time = 0;    
  95   4                  } 
  96   3                  break;
  97   3              }
  98   2              case RED_AMBER: {
  99   3                  LIGHT_RED_L2 = LIGHT_ON;
 100   3                  LIGHT_AMBER_L2 = LIGHT_OFF;
 101   3                  LIGHT_GREEN_L2 = LIGHT_OFF;
 102   3                  if(++gState_Light_L2_Time >= LIGHT_RED_AMBER_DURATION) {
 103   4                      gLight_State_L2 = RED_RED_1;
 104   4                      gState_Light_L2_Time = 0;    
 105   4                  } 
 106   3                  break;
 107   3              }
 108   2              case RED_RED_1: {
 109   3                  LIGHT_RED_L2 = LIGHT_ON;
 110   3                  LIGHT_AMBER_L2 = LIGHT_OFF;
 111   3                  LIGHT_GREEN_L2 = LIGHT_OFF;
 112   3                  if(++gState_Light_L2_Time >= LIGHT_RED_RED_1_DURATION) {
 113   4                      gLight_State_L2 = GREEN;
 114   4                      gState_Light_L2_Time = 0;    
 115   4                  } 
 116   3                  break;
C51 COMPILER V8.12   GSTATEMACHINE                                                         10/02/2017 22:09:00 PAGE 3   

 117   3              }
 118   2              case GREEN: {
 119   3                  LIGHT_RED_L2 = LIGHT_OFF;
 120   3                  LIGHT_AMBER_L2 = LIGHT_OFF;
 121   3                  LIGHT_GREEN_L2 = LIGHT_ON;
 122   3                  if(++gState_Light_L2_Time >= LIGHT_GREEN_DURATION) {
 123   4                      gLight_State_L2 = AMBER;
 124   4                      gState_Light_L2_Time = 0;    
 125   4                  } 
 126   3                  break;
 127   3              }
 128   2              case AMBER: {
 129   3                  LIGHT_RED_L2 = LIGHT_OFF;
 130   3                  LIGHT_AMBER_L2 = LIGHT_ON;
 131   3                  LIGHT_GREEN_L2 = LIGHT_OFF;
 132   3                  if(++gState_Light_L2_Time >= LIGHT_AMBER_DURATION) {
 133   4                      gLight_State_L2 = RED_RED_2;
 134   4                      gState_Light_L2_Time = 0;    
 135   4                  } 
 136   3                  break;
 137   3              }
 138   2              case RED_RED_2: {
 139   3                  LIGHT_RED_L2 = LIGHT_ON;
 140   3                  LIGHT_AMBER_L2 = LIGHT_OFF;
 141   3                  LIGHT_GREEN_L2 = LIGHT_OFF;
 142   3                  if(++gState_Light_L2_Time >= LIGHT_RED_RED_2_DURATION) {
 143   4                      gLight_State_L2 = RED;
 144   4                      gState_Light_L2_Time = 0;    
 145   4                  } 
 146   3                  break;
 147   3              }
 148   2          }
 149   1      }
 150          //===============================================


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    425    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
