C51 COMPILER V8.12   GINTERRUPT                                                            10/02/2017 21:15:13 PAGE 1   


C51 COMPILER V8.12, COMPILATION OF MODULE GINTERRUPT
OBJECT MODULE PLACED IN .\GInterrupt.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\..\lib\GInterrupt.c BROWSE INCDIR(..\..\lib) DEBUG OBJECTEXTEND PRINT(.\
                    -GInterrupt.lst) OBJECT(.\GInterrupt.obj)

line level    source

   1          //===============================================
   2          #include "GInterrupt.h"
   3          #include "GLed.h"
   4          #include "GButton.h"
   5          //===============================================
   6          #define PRELOAD (65536 - ((OSC_FREQ * 10) / (OSC_PER_INST * 1000))) // ms
   7          #define PRELOADH (PRELOAD / 256)
   8          #define PRELOADL (PRELOAD % 256)
   9          //===============================================
  10          void GTimer_T0_Reload();
  11          void GTimer_T1_Reload();
  12          //===============================================
  13          void GInterrupt_Start() {
  14   1          EA = 1;
  15   1      }
  16          //===============================================
  17          void GTimer_T0_Reload() {
  18   1          TR0 = 0;
  19   1          TH0 = PRELOADH;
  20   1          TL0 = PRELOADL;
  21   1          TR0 = 1;
  22   1      }
  23          //===============================================
  24          void GTimer_T1_Reload() {
  25   1          TR1 = 0;
  26   1          TH1 = PRELOADH;
  27   1          TL1 = PRELOADL;
  28   1          TR1 = 1;
  29   1      }
  30          //===============================================
  31          void GTimer_T0_Init() {
  32   1          TMOD &= 0xF0;
  33   1          TMOD |= 0x01;
  34   1          GTimer_T0_Reload();
  35   1          ET0 = 1; 
  36   1      }
  37          //===============================================
  38          void GTimer_T1_Init() {
  39   1          TMOD &= 0x0F;
  40   1          TMOD |= 0x10;
  41   1          GTimer_T1_Reload();
  42   1          ET1 = 1; 
  43   1      }
  44          //===============================================
  45          void GTimer_T2_Init() {
  46   1          T2CON = 0x00; 
  47   1          TH2 = PRELOADH; 
  48   1          RCAP2H = PRELOADH; 
  49   1          TL2 = PRELOADL; 
  50   1          RCAP2L = PRELOADL;
  51   1          ET2 = 1;
  52   1          TR2 = 1;
  53   1      }
  54          //===============================================
C51 COMPILER V8.12   GINTERRUPT                                                            10/02/2017 21:15:13 PAGE 2   

  55          #ifdef GSDCC /* SDCC C Compiler */
              void GInterrupt_Timer_T0() __interrupt(INTERRUPT_TIMER_T0) 
              #else /* Keil µVision C Compiler */
  58          void GInterrupt_Timer_T0() interrupt INTERRUPT_TIMER_T0 
  59          #endif
  60          {
  61   1          GTimer_T0_Reload();
  62   1          GButton_Scan();
  63   1          GButton_Update();
  64   1          GLed_Left_Right();
  65   1      }
  66          //===============================================
  67          #ifdef GSDCC /* SDCC C Compiler */
              void GInterrupt_Timer_T1() __interrupt(INTERRUPT_TIMER_T1) 
              #else /* Keil µVision C Compiler */
  70          void GInterrupt_Timer_T1() interrupt INTERRUPT_TIMER_T1 
  71          #endif
  72          {
  73   1          GTimer_T1_Reload();
  74   1          GButton_Scan();
  75   1          GButton_Update();
  76   1          GLed_Left_Right();
  77   1      }
  78          //===============================================
  79          #ifdef GSDCC /* SDCC C Compiler */
              void GInterrupt_Timer_T2() __interrupt(INTERRUPT_TIMER_T2) 
              #else /* Keil µVision C Compiler */
  82          void GInterrupt_Timer_T2() interrupt INTERRUPT_TIMER_T2 
  83          #endif
  84          {
  85   1          TF2 = 0;
  86   1          GButton_Scan();
  87   1          GButton_Update();
  88   1          GLed_Left_Right();
  89   1      }
  90          //===============================================


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    270    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
